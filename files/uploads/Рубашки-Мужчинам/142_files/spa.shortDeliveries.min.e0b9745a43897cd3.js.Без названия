(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";$.views&&$.views.tags({shortDeliveries:{mainElement:".delivery__slider-wrap",template:'\n                <div class="delivery__slider-wrap">\n                {^{if ~tag.deliveries}}\n                    <div class="swiper-container">\n                        <div class="swiper-wrapper">\n                        {{for ~tag.deliveries}}\n                            <div class="swiper-slide" >\n                                <a href="{{:~deliveriesUrl}}" class="delivery__item">\n                                    <div class="delivery__info" data-link="class{merge: (totalToPay > 0) toggle=\'delivery__info--pay\'}">\n                                        {^{if totalToPay > 0}}\n                                        <div class="delivery__info-title">{{:~tag.localizer.haveUnpaidItemsVariable}} {{priceWithCurrencyOld:totalToPay true currency}}</div>\n                                        <button type="button" class="btn-main delivery__info-btn">{{:~tag.localizer.payVariable}}</button>\n                                        {{else}}\n                                        <div class="delivery__info-title delivery__info-title--success">{{:(courier ? ~tag.localizer.atCourier: ~tag.localizer.orderReady)}}</div>\n                                        {{if workTime}}\n                                        <div class="delivery__info-text">{{:workTime}}</div>\n                                        {{/if}}\n                                        <div class="delivery__info-text">{{:deliveryType}}: {{:address}}</div>\n                                        <div class="delivery__info-code hide-desktop">{{if showCode}}{{:~tag.privateCode}}{{/if}}</div>\n                                        {{/if}}\n                                    </div>\n                                    \n                                    {^{if maxItems > 0}}\n                                    <div class="delivery__photo">\n                                        {{for products end=maxItems}}\n                                        <div class="delivery__photo-item img-plug">\n                                            <img src="{{:~ImageUrl(code1S, \'c246x328\', 1)}}" alt="" width="45" height="60">\n                                        </div>\n                                        {{/for}}\n                                        {{if products.length > maxItems}}\n                                        <div class="delivery__photo-hidden">+{{:products.length - maxItems}}</div>\n                                        {{/if}}\n                                    </div>\n                                    {{/if}}\n                                    \n                                    {{if ~tag.qrCode && totalToPay == 0 }}\n                                    <div class="delivery__qr-wrap hide-desktop">\n                                        <img class="delivery__qr" src="data:image/png;base64,{{:~tag.qrCode}}" alt="qr-code" data-link="{tooltip classes=\'tooltip-qr\' pos=\'center bottom\' trigger=\'click\' tmplName=\'readyDeliveriesQrCodeTooltip\' tmplData=~tag.qrCode preventDefault=true}">\n                                    </div>\n                                    {{/if}}\n                                </a>\n                            </div>\n                        {{/for}}\n                        </div>\n                        \n                        \n                        <button class="swiper-button-prev swiper-button-disabled"></button>\n                        <button class="swiper-button-next swiper-button-disabled"></button>\n                    </div>\n                    \n                    <div class="swiper-pagination"></div>\n                {{/if}}    \n                </div>\n                {^{if ~loading }}\n                <div class="delivery__preloader"></div>\n                {{/if}}\n                ',onUpdate:!1,minItems:3,init:function(){this.localizer=this.ctx.root.$localziation,this.ml=this.ctx.root.$moduleLoader;const e=this.ctx.root.$router.routes.find(e=>"SpaActiveOrdersEntrypoint"==e.name);e&&this.ctxPrm("deliveriesUrl",e.path)},async onAfterLink(){var e,i;this.ctxPrm("loading",!0);const t=await this.ctx.root.$services.groupedDeliveriesService.get({readyToReceive:!0,short:!0,fromCache:!0}).catch(e=>console.log(e));if(!t)return void this.ctxPrm("loading",!1);let n=null!==(e=t.active)&&void 0!==e?e:[];if(t.postPayments&&(n=[...t.postPayments,...t.active]),this.ctxPrm("loading",!1),!t||n.length<1)return;let r=this;$.observable(r).setProperty({deliveries:n,privateCode:t.privateCode,qrCode:t.qrCode,tryInitPayPopup:function(){-1!==location.search.indexOf("paytherest")&&r.handler.call(this)},payTheRest:function(e){null==e||e.preventDefault(),r.ml.loadModuleAsync("paymentPopup").then(e=>{let i=this.products.map(e=>e.rId);e.showPayTheRestPopupAsync(this.totalToPay,i)})}});const a=null===(i=r.mainElem[0])||void 0===i?void 0:i.querySelector(".swiper-container");if(!a)return;a.querySelectorAll(".delivery__info").forEach(e=>{const i=$.view(e),t=e.closest(".delivery__item").offsetWidth-Math.min(e.scrollWidth,e.offsetWidth)-65;let n=this.minItems;t>60&&(n=~~(t/60)),$.observable(i.data).setProperty("maxItems",n)});const o=new Swiper(a,{breakpoints:{1024:{}},init:!1,lazy:!0,preloadImages:!1,slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:a.querySelector(".swiper-button-next"),prevEl:a.querySelector(".swiper-button-prev")},pagination:t.active.length>1&&{el:this.mainElem[0].querySelector(".swiper-pagination"),clickable:!0,paginationType:"bullets",dynamicBullets:!0}});o.on("breakpoint",()=>{if(2==t.active.length){const e="m"==wb.settings.displayMode,i=this.mainElem[0].querySelector(".swiper-pagination");i&&(i.style.display=e?null:"none")}}),o.init()}}});

},{}]},{},[1]);
